import { Schema, model, models, Model } from "mongoose";

type QuestionType = "mcq" | "numerical";

type Option = {
  statement: string;
  hexId: string;
};

type QuestionInfo = {
  statement: string;
  hexId: string;
  questionType: QuestionType;
  options?: Option[];
  correctAnswer: string; // hexId or a number - will have to convert string to number if option-type is numerical
};

const optionSchema = new Schema({
  statement: { type: String, required: true },
  hexId: { type: String, required: true },
});

const questionSchema = new Schema<QuestionInfo>({
  statement: {
    type: String,
    required: true,
  },
  hexId: {
    type: String,
    required: true,
  },
  questionType: {
    type: String,
    required: true,
  },
  options: [optionSchema],
  correctAnswer: {
    type: String,
    required: true,
  },
});

export default (models.Question as Model<QuestionInfo>) || model("Question", questionSchema);
