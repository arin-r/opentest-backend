import mongoose, {Schema, model, models, Model} from "mongoose";

type UserStatus = "admin" | "student"
type UserInfo = {
  email: string;
  name: string;
  picture: string;
  status: UserStatus;
  ongoingTestSession: mongoose.Types.ObjectId
};

const userSchema = new Schema<UserInfo> ({
  email: {
    type: String,
    require: true,
    unique: true,
  },
  name: {
    type: String,
    require: true,
  },
  picture: {
    type: String,
    require: false
  },
  status: {
    type: String,
    default: "student",
  },
  ongoingTestSession: {
    type: Schema.Types.ObjectId,
    ref: "TestSession",
    required: false,
  }
})

export default (models.User as Model<UserInfo>) || model('User', userSchema);